define(['require', 'app'],
    function(require, APP) {
        /**
         * Controller for tabProfile_old generated by Appery.io
         * @module tabProfile_old
         */
        APP.controller('tabProfile_old', ['$scope', 'Apperyio', controller]);

        function controller($scope, Apperyio) {
            /**
             * user controller variables
             */
            $scope.user = Apperyio.EntityAPI('User');
            $scope.username = Apperyio.EntityAPI('String');
            $scope.LastName = Apperyio.EntityAPI('String');
            /**
             * User controller functions
             */
            /**
             * @function init
             */
            $scope.init = function() {
                //On load screen logic
                var userData = Apperyio.get("dataStorage");
                $scope.user = userData.current;
            };
            /**
             * @function lo
             */
            $scope.lo = function() {
                var requestData = {};
                var sessionToken = $scope.user.session;
                console.log(sessionToken)
                requestData = (function mapping7038($scope) {
                    var requestData = {};
                    requestData.headers = {};
                    var user_scope = $scope.user;
                    requestData.headers['X-Appery-Session-Token'] = user_scope.session;
                    return requestData;
                    /*|button_mapping|onbeforesend|74FD9B36-8A5C-B2C0-74B7-1A0F1D5F2A73||7038|*/
                })($scope);
                // read more about using rest services: https://links.appery.io/ve-snippet-rest
                Apperyio.get("phoneapp_logout_service")(requestData).then(
                    /*|service_bookmark|bookmark|74FD9B36-8A5C-B2C0-74B7-1A0F1D5F2A73||5562|*/
                    function(success) { // success callback
                        /*|button_mapping|onsuccess|74FD9B36-8A5C-B2C0-74B7-1A0F1D5F2A73||3008|*/
                        Apperyio.navigateTo("Login", {});
                    },
                    function(error) { // callback to handle request error
                    },
                    function(notify) { // notify callback, can fire few times
                    });
            };
        }
    });